<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notification Test</title>
</head>
<body>
    <h2>Real-time Notifications</h2>
    <ul id="notifications"></ul>

    <script>
        // Assuming your Django user ID is passed into the template
        const userId = "{{ request.user.id }}";

        // WebSocket connection (adjust if not using /ws/notifications/)
        const socket = new WebSocket(
            "ws://" + window.location.host + "/ws/notifications/"
        );

        socket.onopen = function () {
            console.log("WebSocket connected ✅");
        };

        socket.onmessage = function (event) {
            const data = JSON.parse(event.data);
            console.log("Notification received:", data);

            // Show notification in list
            const li = document.createElement("li");
            li.innerHTML = `<strong>${data.title}:</strong> ${data.message}`;
            document.getElementById("notifications").appendChild(li);
        };

        socket.onclose = function () {
            console.log("WebSocket disconnected ❌");
        };
    </script>
</body>
</html>
